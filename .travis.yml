language: php

sudo: false

php:
  - 5.5
  - 5.6
  - hhvm

before_script:
  - if [[ $TRAVIS_PHP_VERSION =~ ^hhvm ]]; then echo 'xdebug.enable = On' >> /etc/hhvm/php.ini; fi
  - composer self-update
  - composer update --prefer-source

script: vendor/bin/phpunit

after_script:
  - vendor/bin/test-reporter --stdout > codeclimate.json
  - "curl -X POST -d @codeclimate.json -H 'Content-Type: application/json' -H 'User-Agent: Code Climate (PHP Test Reporter v0.1.2)' https://codeclimate.com/test_reports"

addons:
  code_climate:
    repo_token:
      secure: KuOIoa9+0Ud0Zfh1JsdRbEAJl69ln7j/kS5q7PDYEgoyfI19krFYsGSokjuWpnt8je+ebnCM4BmV79aZffwxpEFgeLmYoDoREX0sZM43ybarlYNe3J1tuM79YIuIqxddh1mMHgGXzX+Ar+1gs8PA7bEJrgmd+JlV6gb8V/gTz0Q=
